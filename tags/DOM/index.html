<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
  <title>DOM &mdash; Alejandro Beltrán</title>
  <meta name="author" content="Alejandro Beltrán">
  
  <meta name="description" content="Blogging about Front End Development, Software and stuff">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <meta property="og:site_name" content="Alejandro Beltrán">

  
    <meta property="og:image" content="undefined">
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Alejandro Beltrán" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.min.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  
<script>
  var _gaq=[['_setAccount','UA-39910763-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src='//www.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>


</head>

<body>
  <header id="header" class="inner">
    <div class="alignleft">
  <h1><a href="/">Alejandro Beltrán</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
  </header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title tag">DOM</h2>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2011-03-28T17:30:00.000Z">
          Mar 28th, 2011
        </time>
      
      
  
    <h1 class="title"><a href="/2011/htmlcollections-nodelists/">HTMLCollections &amp; NodeLists</a></h1>
  


    </header>
    <div class="entry">
      
        <p>Most of us believed, at least for some time, that in our DOM Scripting, we
always dealt with arrays in our JavaScript:</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="keyword">var</span> myLinks = document.getElementsByTagName(<span class="string">'a'</span>); <span class="comment">// we have three links</span>

myLinks.length; <span class="comment">// "3"</span>
</pre></td></tr></table></figure>

<p>We later found out that the things we thought were arrays, were instead
array-like objects. But how exactly are they like arrays? Those &quot;array-like&quot;
objects/elements/things, most of the time, are either HTMLCollections or
NodeLists, not native JavaScript array objects. Take a look at what the
specification says of them, the keyword is live:</p>
<blockquote><p>An HTMLCollection is a list of nodes. Collections in the HTML DOM are assumed
to be live meaning that they are automatically updated when the underlying</p>
<footer><strong>DOM Level 1</strong><cite><a href="http://www.w3.org/TR/REC-DOM-Level-1/level-one-html.html#ID-75708506">www.w3.org/TR/REC-DOM-Level-1/&hellip;</a></cite></footer></blockquote>
<blockquote><p>The NodeList interface provides the abstraction of an ordered collection of
nodes, without defining or constraining how this collection is implemented.
odeList objects in the DOM are live.</p>
<footer><strong>DOM Level 3</strong><cite><a href="http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/DOM3-Core.html#core-ID-536297177">www.w3.org/TR/2004/&hellip;</a></cite></footer></blockquote>

<p>But what does that mean? It means that live collections, if modified, are
updated as the program runs. For example, this is an infinte loop:</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="keyword">var</span> myLinks = document.getElementsByTagName(<span class="string">'a'</span>), <span class="comment">// we have three links</span>
    i,
    j;

<span class="keyword">for</span> (i = <span class="number">0</span>, j = myLinks.length; i &lt; j; i += <span class="number">1</span> ) {
    document.body.appendChild(document.createElement(<span class="string">'a'</span>));
}
</pre></td></tr></table></figure>

<p>We&#39;re getting our collection (of three links) and then for each link that we
have, we&#39;re going to append another link to the body. So why is this infinite?
Because the collection is live, which means that not only will <code>i</code> increment,
<code>j</code> also will, so naturally the loop will keep going.</p>
<p>So why are they called array-like objects? If it looks like an array and acts
like an array, then it must be an array, right? Wrong, DOM collections look
like arrays because:</p>
<ul>
<li>They have an associated index to each value in the container. But that&#39;s
something an object can have too:</li>
</ul>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="keyword">var</span> myObj = {
    <span class="number">0</span>: <span class="string">'zero'</span>,
    <span class="number">1</span>: <span class="string">'one'</span>,
    <span class="number">2</span>: <span class="string">'two'</span>,
    <span class="number">3</span>: <span class="string">'three'</span>
};

alert(myObj[<span class="number">0</span>]); <span class="comment">// 'zero'</span>
alert(myObj[<span class="number">3</span>]); <span class="comment">// 'three'</span>
</pre></td></tr></table></figure>

<p>The <code>alert</code> statements might look like they want the elements with index <code>0</code>
and <code>3</code> but you&#39;re really getting the value from the property named <code>0</code> and <code>3</code>.</p>
<ul>
<li>They have a <code>length</code> property. This is deceptive because arrays have this same
property, but so do HTMLCollections and NodeLists. But, because these are not
true arrays they do not have <code>push</code>, <code>concat</code>, <code>splice</code>or any of the other array
methods.</li>
</ul>
<p>Be prepared, these are some of the DOM methods (that I know of) that return an
HTMLCollection or NodeList:</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre></td><td class="code"><pre><span class="comment">// DOM Level 1/HTML 4.0</span>
<span class="comment">// ---------------------------</span>
<span class="comment">// Return an HTMLCollection</span>
document.anchors
document.applets
document.forms
document.images
document.links

document.getElementsByName

formElement.elements
selectElement.options
tableElement.rows
tableElement.tBodies
tableRowElement.cells

<span class="comment">// Not part of any standard</span>
document.embeds
document.plugins

<span class="comment">// DOM Level 2</span>
<span class="comment">// ------------------</span>
<span class="comment">// Return a NodeList</span>
Node.childNodes

document.getElementsByName
document.getElementsByTagName
document.getElementsByTagNameNS
document.getElementsByName

element.getElementsByTagName
element.getElementsByTagNameNS

<span class="comment">// WHATWG Web Applications 1.0</span>
<span class="comment">// ---------------------------</span>
<span class="comment">// Return a NodeList</span>
document.getElementsByClassName
element.getElementsByClassName
</pre></td></tr></table></figure>

<p>Throughout this post I&#39;ve been talking about <code>NodeLists</code> as such and not as live
<code>NodeLists</code> because they are inherintely live. There&#39;s an exception to this,
there are <em>static</em> <code>NodeLists</code> that act as snapshots and do not update when the
document is modified:</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="comment">// Selectors API Level 1</span>
<span class="comment">// ---------------------</span>
<span class="comment">// Return a static NodeList</span>
document.querySelectorAll
element.querySelectorAll
</pre></td></tr></table></figure>

<p>In conclusion, I think it&#39;s important to know the differences between a live DOM
collection a true JavaScript array, it&#39;s also an important thing to be aware of
because you&#39;ll eventually interact with these.</p>
<p>I know so far I&#39;ve been talking mostly about the DOM (sorry, this wasn&#39;t the
exception) but you cannot say that this was a boring topic, or was it?</p>
<p>Sources:</p>
<p><a href="http://goo.gl/Rsjsz">Why is getElementsByTagName() faster than querySelectAll()?</a></p>
<p><a href="http://goo.gl/1j5SA">Speed Up Your JavaScript (video)</a></p>
<p><a href="http://goo.gl/EsmN4">HTMLCollection - MDN Doc Center, NodeList - MDN Doc Center</a></p>
<p><a href="http://goo.gl/PN66P">DOM Level 1 Specification</a></p>
<p><a href="http://goo.gl/jDqpo">DOM Level 2 Specification</a></p>
<p><a href="http://goo.gl/K6p1j">DOM Level 3 Specification</a></p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/htmlcollections-nodelists/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2011-03-03T18:30:00.000Z">
          Mar 3rd, 2011
        </time>
      
      
  
    <h1 class="title"><a href="/2011/using-innerhtml/">Using innerHTML</a></h1>
  


    </header>
    <div class="entry">
      
        <p><code>innerHTML</code> is a read/write property of a DOM element that gets/sets the HTML
contained in the element.</p>
<h2>It&#39;s fast</h2>
<p>This might vary between browsers but, it&#39;s almost a fact that creating and
inserting elements using <code>innerHTML</code> instead of DOM methods is faster, not only
at execution time, it&#39;ll also make the script size lighter because less code is
needed.</p>
<h2>It&#39;s clean &amp; readable</h2>
<p>Although the name, <code>innerHTML</code>, might seem confusing at first, it comes as the
better choice in terms of code readability because DOM methods are very verbose
and can consume a lot of lines of code.</p>
<h2>It&#39;s supported</h2>
<p>It was first introduced by Microsoft as proprietary to IE and there&#39;s no spec
that defines the behavior of <code>innerHTML</code> but it has been adopted by all major
browsers because of its usefulness and it pretty much works the same in all of
them.</p>
<p>Creating and inserting using DOM methods:</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="keyword">var</span> newDiv = document.createElement(<span class="string">'div'</span>);

newDiv.setAttribute(<span class="string">'id'</span>, <span class="string">'new-div'</span>);
newDiv.setAttribute(<span class="string">'class'</span>, <span class="string">'big-div'</span>);

<span class="keyword">var</span> text = document.createTextNode(<span class="string">'Some text here'</span>);
newDiv.appendChild(text);

document.body.appendChild(newDiv); <span class="comment">// div is inserted in the tree</span>
</pre></td></tr></table></figure>

<p>Creating and inserting using innerHTML:</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="keyword">var</span> newDiv = <span class="string">'&lt;div id="new-div" class="big-div"&gt;Some text here&lt;/div&gt;'</span>;

document.body.innerHTML = newDiv; <span class="comment">// div is inserted in the tree&lt;/pre&gt;</span>
</pre></td></tr></table></figure>


<h2>Reasons not to use it</h2>
<ul>
<li>Not standard. Although it&#39;s fast and it works, the bottom line is that it is
not part of any W3C or DOM standard. However, there are plans of adding it to
the HTML5 specification.</li>
<li>XSS unsafe. You have to know when to use it, otherwise you are exposing your
application to XSS attacks, choose DOM methods until you&#39;re familiar with the
subject.</li>
<li>Not implemented everywhere. There are some table related elements, in IE,
that can&#39;t be modified with it. The implementation and behavior might vary from
browser to browser.</li>
<li>Destroys the children. Setting a value to <code>innerHTML</code> will destroy every
descendant to that element, if any of those descendants had event handlers,
that could potentially create a memory leak in some browsers.</li>
</ul>
<p>Sources:</p>
<p><a href="http://goo.gl/PKHtg">innerHTML (Mozilla Developer Network)</a></p>
<p><a href="http://goo.gl/UUyIw">innerHTML (Microsoft Developer Network)</a></p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/using-innerhtml/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2011-02-28T18:30:00.000Z">
          Feb 28th, 2011
        </time>
      
      
  
    <h1 class="title"><a href="/2011/manipulating-dom-elements-and-styles/">Manipulating DOM elements and styles</a></h1>
  


    </header>
    <div class="entry">
      
        <h2>Manipulating elements</h2>
<p>Once you have access to an element, you can manipulate it using assignment of
object properties or DOM methods. Let&#39;s take a look at the examples:</p>
<h3>HTML</h3>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>&lt;img src="small-dog.png" id="img-dog"&gt;
</pre></td></tr></table></figure>

<h3>JavaScript</h3>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="keyword">var</span> myImage = document.getElementById(<span class="string">'img-dog'</span>);

<span class="comment">// Object property</span>
myImage.src = <span class="string">'big-dog.png'</span>;

<span class="comment">// DOM method</span>
myImage.setAttribute(<span class="string">'src'</span>, <span class="string">'big-dog.png'</span>);
</pre></td></tr></table></figure>

<p>In both examples we&#39;re changing the <code>src</code> of our image element. It&#39;s recommended
to use the first example, it&#39;s easier, shorter, faster and works across browsers.
If, for some reason, you can&#39;t use it, use the second one.
Here&#39;s a link to <a href="http://goo.gl/HQo7a">quirksmode.org</a> with more information.</p>
<h2>Style</h2>
<p>You can also change an element&#39;s style dynamically . You can do so by changing
the <code>className</code> property or applying a style directly into the <code>style</code> object.</p>
<h3>HTML</h3>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>&lt;span id="my-span"&gt;Some text here&lt;/span&gt;
</pre></td></tr></table></figure>

<h3>JavaScript</h3>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="keyword">var</span> mySpan = document.getElementById(<span class="string">'my-span'</span>);

mySpan.className       = <span class="string">'big'</span>;    <span class="comment">// the CSS class 'big' makes the text big</span>
mySpan.style.textAlign = <span class="string">'center'</span>; <span class="comment">// centers the text</span>
</pre></td></tr></table></figure>

<p>Both, <code>className</code> and <code>style</code>, are read/write. But, the style object will only
reflect styles that are directly applied to the element (i.e. in the markup),
not the ones from the cascade. To get those you need go a little bit further:</p>
<h3>HTML</h3>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>&lt;span id="my-span"&gt;Some text here&lt;/span&gt;
</pre></td></tr></table></figure>

<h3>CSS</h3>
<figure class="highlight lang-css"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="id">#my-span</span> <span class="rules">{
    <span class="rule"><span class="attribute">font-weight</span>:<span class="value"> bold;</span></span>
<span class="rule">}</span></span>
</pre></td></tr></table></figure>

<h3>JavaScript</h3>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="keyword">var</span> mySpan = document.getElementById(<span class="string">'my-span'</span>);

mySpan.style.fontWeight;              <span class="comment">// returns an empty string</span>
mySpan.currentStyle[<span class="string">'fontWeight'</span>];    <span class="comment">// returns 'bold', works only in IE</span>
window.getComputedStyle(mySpan)
    .getPropertyValue(<span class="string">'font-weight'</span>); <span class="comment">// returns 'bold', doesn't work in IE</span>
</pre></td></tr></table></figure>

<p>As you can see:</p>
<ul>
<li>The CSS property on the <code>style</code> object didn&#39;t have anything and returned an
empty string.</li>
<li>IE&#39;s proprietary method is very nice and readable (you could also use the
dot notation, e.g. <code>mySpan.currentStyle.fontWeight</code>).</li>
<li>The standard way is very verbose and complicated but works on all standards
compliant browsers. If you need to get styles individually I suggest creating a
utility function to deal with the cross browser issues (an example from
<a href="http://goo.gl/vlIir">quirksmode.org</a>).</li>
</ul>
<p>But in general, I recommend using CSS classes for dynamic styling. It is way
easier and faster to add/modify/delete CSS classes. It&#39;s a style agnostic
practice, in case you don&#39;t have control over the styles, and also encourages
layer separation.</p>
<p>Source:</p>
<p><a href="http://goo.gl/XoDym">Douglas Crockford: &quot;Theory of the Dom&quot; (2 of 3)</a></p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/manipulating-dom-elements-and-styles/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  

  <nav id="pagination">
  
  
    <a href="/tags/DOM/page/2/" class="alignright next">Next</a>
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:alebelcor.github.io">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/CSS/">CSS</a><small>1</small></li>
  
    <li><a href="/tags/DOM/">DOM</a><small>4</small></li>
  
    <li><a href="/tags/HTML5/">HTML5</a><small>1</small></li>
  
    <li><a href="/tags/Java/">Java</a><small>1</small></li>
  
    <li><a href="/tags/JavaScript/">JavaScript</a><small>12</small></li>
  
    <li><a href="/tags/Tools/">Tools</a><small>2</small></li>
  
    <li><a href="/tags/jQuery/">jQuery</a><small>3</small></li>
  
  </ul>
</div>


  
<div class="widget twitter">
  <h3 class="title">Tweets</h3>
  <ul id="tweets"></ul>
</div>

<script type="text/javascript">
var twitter_stream = ['alebelcor', 5, false];
var moment_js_path = '/js/moment.min.js';
</script>
<script src="/js/twitter.js"></script>


</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner">
    <div class="alignleft">
  
  &copy; 2013 Alejandro Beltrán (&#10061;&#7461;&#10061;&#651;)
  
</div>
<div class="clearfix"></div>

  </footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>





</body>
</html>
