<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
  <title>Page 4 &mdash; Archives: 2011 &mdash; Alejandro Beltrán</title>
  <meta name="author" content="Alejandro Beltrán">
  
  <meta name="description" content="Blogging about Front End Development, Software and stuff">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <meta property="og:site_name" content="Alejandro Beltrán">

  
    <meta property="og:image" content="undefined">
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Alejandro Beltrán" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.min.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  
<script>
  var _gaq=[['_setAccount','UA-39910763-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src='//www.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>


</head>

<body>
  <header id="header" class="inner">
    <div class="alignleft">
  <h1><a href="/">Alejandro Beltrán</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
  </header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title">2011</h2>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2011-04-21T21:30:00.000Z">
          Apr 21st, 2011
        </time>
      
      
  
    <h1 class="title"><a href="/2011/jquery-parsejson/">jQuery.parseJSON</a></h1>
  


    </header>
    <div class="entry">
      
        <p>The other day I was re-watching (haha, learning through repetition) &quot;11 More
Things I Learned from the jQuery Source&quot; and this time I was quite amazed when
Paul Irish talked about <code>parseJSON</code>. And the reason was the way jQuery makes the
JSON object, it&#39;s clever, it&#39;s very clever.</p>
<p>Let me show you. Here&#39;s jQuery&#39;s 1.5.2 <code>parseJSON</code> method:</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="code"><pre>parseJSON: <span class="keyword">function</span>( data ) {
    <span class="keyword">if</span> ( <span class="keyword">typeof</span> data !== <span class="string">"string"</span> || !data ) {
        <span class="keyword">return</span> <span class="literal">null</span>;
    }

    <span class="comment">// Make sure leading/trailing whitespace is removed (IE can't handle it)</span>
    data = jQuery.trim( data );

    <span class="comment">// Make sure the incoming data is actual JSON</span>
    <span class="comment">// Logic borrowed from http://json.org/json2.js</span>
    <span class="keyword">if</span> ( rvalidchars.test(data.replace(rvalidescape, <span class="string">"@"</span>)
        .replace(rvalidtokens, <span class="string">"]"</span>)
        .replace(rvalidbraces, <span class="string">""</span>)) ) {

        <span class="comment">// Try to use the native JSON parser first</span>
        <span class="keyword">return</span> window.JSON && window.JSON.parse ?
            window.JSON.parse( data ) :
            (<span class="keyword">new</span> Function(<span class="string">"return "</span> + data))();

    } <span class="keyword">else</span> {
        jQuery.error( <span class="string">"Invalid JSON: "</span> + data );
    }
},
</pre></td></tr></table></figure>

<p>Let&#39;s dissect that:</p>
<ul>
<li>Lines 2-4 are just checking you pass a string and its not empty.</li>
<li>Line 7 explains itself.</li>
<li>Lines 11-13 is a regular expression evaluation to make sure we have valid JSON.</li>
</ul>
<p>The interesting part, in this case, is the return statement:</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="keyword">return</span> window.JSON && window.JSON.parse ?
    window.JSON.parse( data ) :
    (<span class="keyword">new</span> Function(<span class="string">"return "</span> + data))();
</pre></td></tr></table></figure>

<p>If the browser has native JSON support, use that. If not, and this is the
interesting part, we&#39;ll do <code>(new Function(&quot;return &quot; + data))()</code>.</p>
<p>But what does that mean? I&#39;m glad you asked.</p>
<ul>
<li>We&#39;re calling the <code>Function</code> constructor, which will return a <code>Function</code>
object (function reference) and immediately invoke it.</li>
<li>The <code>Function</code> constructor takes an &quot;n&quot; number of arguments that will become
the function&#39;s parameters, being the last one the body of the function. We&#39;re
passing only one parameter, meaning <code>&quot;return &quot; + data</code> will become the
function&#39;s body.</li>
<li>What does the constructed function do then? Considering <code>data</code> is a JSON
string it becomes rather obvious now. It returns a JavaScript object. See? I
told you it was clever, no need for <code>eval</code> this way.</li>
</ul>
<p>Sources:</p>
<p><a href="http://goo.gl/NiNm6">11 More Things I Learned From The jQuery Source</a></p>
<p><a href="http://goo.gl/PfwKh">Function - MDN</a></p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/jquery-parsejson/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2011-04-19T18:00:00.000Z">
          Apr 19th, 2011
        </time>
      
      
  
    <h1 class="title"><a href="/2011/beware-of-assholes/">Beware of Assholes</a></h1>
  


    </header>
    <div class="entry">
      
        <h2>What is an asshole?</h2>
<ul>
<li>Someone who either intentionally or unintentionally infuriates/demeans/damages
their peers/superiors/underlings.</li>
<li>There are two flavors: Temporary and Certified assholes. A temporary asshole
is someone who is probably having a bad day or a bad moment. Certified assholes
are persistently nasty and destructive jerks.</li>
</ul>
<h2>Why are they dangerous?</h2>
<ul>
<li>Remember how they can damage people? well, at times that includes clients and
customers.</li>
<li>They undermine organizational performance.</li>
<li>Asshole poisoning is a contagious disease that anyone can catch. Once you
unleash disdain, anger and contempt or someone else unleashes it on you, it
spreads like wildfire.</li>
</ul>
<h2>What should you care?</h2>
<ul>
<li>The total costs of assholes are HIGH. From loss of motivation, higher stress
and turnover to legal and HR management costs like inside and outside counsel.</li>
<li>If you sap the energy out of people, you may be sucking the life out of your
career.</li>
<li>When people feel mistreated and dissatisfied with their jobs, they are
unwilling to do extra work to help their organization.</li>
<li>Writing, displaying and repeating words about treating people with respect,
but allowing or encouraging the opposite behavior, is worse than useless.
The organization and its leaders are seen as hypocrites, which fuels cynicism
and scorn.</li>
<li>Organizations that drive in compassion and drive out fear attract superior
talent, share ideas more freely, have less dysfunctional internal competition,
and trump the external competition.</li>
</ul>
<h2>What should you do?</h2>
<ul>
<li>Adopt The No Asshole Rule.</li>
<li>Have yourself tested.</li>
<li>Get rid of assholes fast.</li>
<li>Treat certified assholes as incompetent employees.</li>
<li>Model and teach constructive confrontation.</li>
<li>Improve your hiring process. Recruiters tend to hire candidates who look and
act like his or her favorite person on the planet- him or herself. Assholes will
hire assholes.</li>
<li>Be like Google. Like Google, not &quot;be&quot; Google. They have a &quot;Don&#39;t be evil&quot;
motto. The company works to screen them out in  hiring, and nasty people suffer
during performance evaluations and  aren&#39;t promoted to management positions.</li>
</ul>
<p>&quot;The No Asshole Rule&quot;, by Robert I. Sutton, is a must-read for anyone looking to
make a difference in their workplace. It is a very entertaining book and quite
a learning experience.</p>
<p><em>This post contains information found in:</em></p>
<p><a href="http://goo.gl/TZP6J">The No Asshole Rule: Building a Civilized Workplace and Surviving One That Isn&#39;t</a></p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/beware-of-assholes/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2011-03-28T17:30:00.000Z">
          Mar 28th, 2011
        </time>
      
      
  
    <h1 class="title"><a href="/2011/htmlcollections-nodelists/">HTMLCollections &amp; NodeLists</a></h1>
  


    </header>
    <div class="entry">
      
        <p>Most of us believed, at least for some time, that in our DOM Scripting, we
always dealt with arrays in our JavaScript:</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="keyword">var</span> myLinks = document.getElementsByTagName(<span class="string">'a'</span>); <span class="comment">// we have three links</span>

myLinks.length; <span class="comment">// "3"</span>
</pre></td></tr></table></figure>

<p>We later found out that the things we thought were arrays, were instead
array-like objects. But how exactly are they like arrays? Those &quot;array-like&quot;
objects/elements/things, most of the time, are either HTMLCollections or
NodeLists, not native JavaScript array objects. Take a look at what the
specification says of them, the keyword is live:</p>
<blockquote><p>An HTMLCollection is a list of nodes. Collections in the HTML DOM are assumed
to be live meaning that they are automatically updated when the underlying</p>
<footer><strong>DOM Level 1</strong><cite><a href="http://www.w3.org/TR/REC-DOM-Level-1/level-one-html.html#ID-75708506">www.w3.org/TR/REC-DOM-Level-1/&hellip;</a></cite></footer></blockquote>
<blockquote><p>The NodeList interface provides the abstraction of an ordered collection of
nodes, without defining or constraining how this collection is implemented.
odeList objects in the DOM are live.</p>
<footer><strong>DOM Level 3</strong><cite><a href="http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/DOM3-Core.html#core-ID-536297177">www.w3.org/TR/2004/&hellip;</a></cite></footer></blockquote>

<p>But what does that mean? It means that live collections, if modified, are
updated as the program runs. For example, this is an infinte loop:</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="keyword">var</span> myLinks = document.getElementsByTagName(<span class="string">'a'</span>), <span class="comment">// we have three links</span>
    i,
    j;

<span class="keyword">for</span> (i = <span class="number">0</span>, j = myLinks.length; i &lt; j; i += <span class="number">1</span> ) {
    document.body.appendChild(document.createElement(<span class="string">'a'</span>));
}
</pre></td></tr></table></figure>

<p>We&#39;re getting our collection (of three links) and then for each link that we
have, we&#39;re going to append another link to the body. So why is this infinite?
Because the collection is live, which means that not only will <code>i</code> increment,
<code>j</code> also will, so naturally the loop will keep going.</p>
<p>So why are they called array-like objects? If it looks like an array and acts
like an array, then it must be an array, right? Wrong, DOM collections look
like arrays because:</p>
<ul>
<li>They have an associated index to each value in the container. But that&#39;s
something an object can have too:</li>
</ul>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="keyword">var</span> myObj = {
    <span class="number">0</span>: <span class="string">'zero'</span>,
    <span class="number">1</span>: <span class="string">'one'</span>,
    <span class="number">2</span>: <span class="string">'two'</span>,
    <span class="number">3</span>: <span class="string">'three'</span>
};

alert(myObj[<span class="number">0</span>]); <span class="comment">// 'zero'</span>
alert(myObj[<span class="number">3</span>]); <span class="comment">// 'three'</span>
</pre></td></tr></table></figure>

<p>The <code>alert</code> statements might look like they want the elements with index <code>0</code>
and <code>3</code> but you&#39;re really getting the value from the property named <code>0</code> and <code>3</code>.</p>
<ul>
<li>They have a <code>length</code> property. This is deceptive because arrays have this same
property, but so do HTMLCollections and NodeLists. But, because these are not
true arrays they do not have <code>push</code>, <code>concat</code>, <code>splice</code>or any of the other array
methods.</li>
</ul>
<p>Be prepared, these are some of the DOM methods (that I know of) that return an
HTMLCollection or NodeList:</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre></td><td class="code"><pre><span class="comment">// DOM Level 1/HTML 4.0</span>
<span class="comment">// ---------------------------</span>
<span class="comment">// Return an HTMLCollection</span>
document.anchors
document.applets
document.forms
document.images
document.links

document.getElementsByName

formElement.elements
selectElement.options
tableElement.rows
tableElement.tBodies
tableRowElement.cells

<span class="comment">// Not part of any standard</span>
document.embeds
document.plugins

<span class="comment">// DOM Level 2</span>
<span class="comment">// ------------------</span>
<span class="comment">// Return a NodeList</span>
Node.childNodes

document.getElementsByName
document.getElementsByTagName
document.getElementsByTagNameNS
document.getElementsByName

element.getElementsByTagName
element.getElementsByTagNameNS

<span class="comment">// WHATWG Web Applications 1.0</span>
<span class="comment">// ---------------------------</span>
<span class="comment">// Return a NodeList</span>
document.getElementsByClassName
element.getElementsByClassName
</pre></td></tr></table></figure>

<p>Throughout this post I&#39;ve been talking about <code>NodeLists</code> as such and not as live
<code>NodeLists</code> because they are inherintely live. There&#39;s an exception to this,
there are <em>static</em> <code>NodeLists</code> that act as snapshots and do not update when the
document is modified:</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="comment">// Selectors API Level 1</span>
<span class="comment">// ---------------------</span>
<span class="comment">// Return a static NodeList</span>
document.querySelectorAll
element.querySelectorAll
</pre></td></tr></table></figure>

<p>In conclusion, I think it&#39;s important to know the differences between a live DOM
collection a true JavaScript array, it&#39;s also an important thing to be aware of
because you&#39;ll eventually interact with these.</p>
<p>I know so far I&#39;ve been talking mostly about the DOM (sorry, this wasn&#39;t the
exception) but you cannot say that this was a boring topic, or was it?</p>
<p>Sources:</p>
<p><a href="http://goo.gl/Rsjsz">Why is getElementsByTagName() faster than querySelectAll()?</a></p>
<p><a href="http://goo.gl/1j5SA">Speed Up Your JavaScript (video)</a></p>
<p><a href="http://goo.gl/EsmN4">HTMLCollection - MDN Doc Center, NodeList - MDN Doc Center</a></p>
<p><a href="http://goo.gl/PN66P">DOM Level 1 Specification</a></p>
<p><a href="http://goo.gl/jDqpo">DOM Level 2 Specification</a></p>
<p><a href="http://goo.gl/K6p1j">DOM Level 3 Specification</a></p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/htmlcollections-nodelists/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  

  <nav id="pagination">
  
    <a href="/archives/2011/page/3/" class="alignleft prev">Prev</a>
  
  
    <a href="/archives/2011/page/5/" class="alignright next">Next</a>
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:alebelcor.github.io">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/CSS/">CSS</a><small>1</small></li>
  
    <li><a href="/tags/DOM/">DOM</a><small>4</small></li>
  
    <li><a href="/tags/HTML5/">HTML5</a><small>1</small></li>
  
    <li><a href="/tags/Java/">Java</a><small>1</small></li>
  
    <li><a href="/tags/JavaScript/">JavaScript</a><small>12</small></li>
  
    <li><a href="/tags/Tools/">Tools</a><small>2</small></li>
  
    <li><a href="/tags/jQuery/">jQuery</a><small>3</small></li>
  
  </ul>
</div>


  
<div class="widget twitter">
  <h3 class="title">Tweets</h3>
  <ul id="tweets"></ul>
</div>

<script type="text/javascript">
var twitter_stream = ['alebelcor', 5, false];
var moment_js_path = '/js/moment.min.js';
</script>
<script src="/js/twitter.js"></script>


</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner">
    <div class="alignleft">
  
  &copy; 2013 Alejandro Beltrán (&#10061;&#7461;&#10061;&#651;)
  
</div>
<div class="clearfix"></div>

  </footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>





</body>
</html>
